"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.stylelintAll = exports.stylelintPaths = void 0;
const fs = require("fs");
const exec_1 = require("@naturalcycles/nodejs-lib/dist/exec");
const yargs = require("yargs");
const paths_cnst_1 = require("../cnst/paths.cnst");
const { prettierDirs, stylelintExtensions, lintExclude } = require('../../cfg/_cnst');
exports.stylelintPaths = [
    // Everything inside these folders
    `./{${prettierDirs}}/**/*.{${stylelintExtensions}}`,
    // Exclude
    ...lintExclude.map((s) => `!${s}`),
];
async function stylelintAll() {
    const { fix } = yargs.options({
        fix: {
            type: 'boolean',
            default: true,
        },
    }).argv;
    const config = [`./stylelint.config.js`, `${paths_cnst_1.cfgDir}/stylelint.config.js`].find(f => fs.existsSync(f));
    const args = [
        fix ? `--fix` : '',
        `--allow-empty-input`,
        `--config`,
        config,
        ...exports.stylelintPaths,
    ].filter(Boolean);
    await (0, exec_1.execWithArgs)('stylelint', args);
}
exports.stylelintAll = stylelintAll;
