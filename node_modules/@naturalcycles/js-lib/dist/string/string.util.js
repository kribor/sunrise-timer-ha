"use strict";
/* eslint-disable unicorn/prefer-string-slice */
Object.defineProperty(exports, "__esModule", { value: true });
exports._nl2br = exports._replaceAll = exports._substringBetweenLast = exports._substringAfterLast = exports._substringAfter = exports._substringBeforeLast = exports._substringBefore = exports._truncateMiddle = exports._truncate = exports._removeWhitespace = exports._split = exports._lowerFirst = exports._upperFirst = exports._capitalize = void 0;
/**
 * Converts the first character of string to upper case and the remaining to lower case.
 */
function _capitalize(s = '') {
    return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();
}
exports._capitalize = _capitalize;
function _upperFirst(s = '') {
    return s.charAt(0).toUpperCase() + s.slice(1);
}
exports._upperFirst = _upperFirst;
function _lowerFirst(s) {
    return s.charAt(0).toLowerCase() + s.slice(1);
}
exports._lowerFirst = _lowerFirst;
/**
 * Like String.split(), but with limit, returning the tail together with last element.
 *
 * @return Returns the new array of string segments.
 */
function _split(str, separator, limit) {
    const parts = str.split(separator);
    return [...parts.slice(0, limit - 1), parts.slice(limit - 1).join(separator)];
}
exports._split = _split;
function _removeWhitespace(s) {
    return s.replace(/\s/g, '');
}
exports._removeWhitespace = _removeWhitespace;
/**
 * _.truncate('hi-diddly-ho there, neighborino')
 * // => 'hi-diddly-ho there, neighbo...'
 */
function _truncate(s, maxLen, omission = '...') {
    if (!s || s.length <= maxLen)
        return s;
    return s.substr(0, maxLen - omission.length) + omission;
}
exports._truncate = _truncate;
/**
 * _.truncateMiddle('abcdefghijklmnopqrstuvwxyz', 10)
 * // => 'abcd...xyz'
 */
function _truncateMiddle(s, maxLen, omission = '...') {
    if (!s || s.length <= maxLen)
        return s;
    const mark1 = Math.round((maxLen - omission.length) / 2);
    const mark2 = s.length - Math.floor((maxLen - omission.length) / 2);
    return s.substr(0, mark1) + omission + s.substr(mark2);
}
exports._truncateMiddle = _truncateMiddle;
// These functions are modeled after Kotlin's String API
function _substringBefore(s, delimiter) {
    const pos = s.indexOf(delimiter);
    return s.substr(0, pos !== -1 ? pos : undefined);
}
exports._substringBefore = _substringBefore;
function _substringBeforeLast(s, delimiter) {
    const pos = s.lastIndexOf(delimiter);
    return s.substr(0, pos !== -1 ? pos : undefined);
}
exports._substringBeforeLast = _substringBeforeLast;
function _substringAfter(s, delimiter) {
    const pos = s.indexOf(delimiter);
    return pos !== -1 ? s.substr(pos + 1) : s;
}
exports._substringAfter = _substringAfter;
function _substringAfterLast(s, delimiter) {
    const pos = s.lastIndexOf(delimiter);
    return pos !== -1 ? s.substr(pos + 1) : s;
}
exports._substringAfterLast = _substringAfterLast;
/**
 * Returns the substring between LAST `leftDelimiter` and then FIRST `rightDelimiter`.
 *
 * @example
 *
 * const s = '/Users/lalala/someFile.test.ts'
 * _substringBetweenLast(s, '/', '.')
 * // `someFile`
 */
function _substringBetweenLast(s, leftDelimiter, rightDelimiter) {
    return _substringBefore(_substringAfterLast(s, leftDelimiter), rightDelimiter);
}
exports._substringBetweenLast = _substringBetweenLast;
/**
 * Polyfill for es2021 `String.prototype.replaceAll`.
 * Uses regex implementation that's a bit faster than another popular "split/join" implementation.
 *
 * Based on: https://stackoverflow.com/a/1144788/4919972
 */
function _replaceAll(s, find, replaceWith) {
    return s.replace(new RegExp(find, 'g'), replaceWith);
}
exports._replaceAll = _replaceAll;
/**
 * Converts `\n` (aka new-line) to `<br>`, to be presented in HTML.
 * Keeps `\n`, so if it's printed in non-HTML environment it still looks ok-ish.
 */
function _nl2br(s) {
    return s.replace(/\n/g, '<br>\n');
}
exports._nl2br = _nl2br;
