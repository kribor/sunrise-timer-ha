/**
 * Implements a Simple Moving Average algorithm.
 */
export class SimpleMovingAverage {
    constructor(size, data = []) {
        this.size = size;
        this.data = data;
        /**
         * Next index of array to push to
         */
        this.nextIndex = 0;
        /**
         * Current average (calculated, cached).
         * Returns 0 (not undefined) for empty data.
         */
        this.avg = 0;
    }
    push(n) {
        this.data[this.nextIndex] = n;
        this.nextIndex =
            this.nextIndex === this.size - 1
                ? 0 // reset
                : this.nextIndex + 1;
        return this.calculateAvg();
    }
    calculateAvg() {
        return (this.avg = this.data.length
            ? this.data.reduce((total, n) => total + n, 0) / this.data.length
            : 0);
    }
}
